


<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
		<title>倘若微小 - Linux下php扩展安装</title>

  		
		<meta name="description" content="Linux 下 php 扩展的安装,extension_dir 的获取,mongo,redis 等php扩展安装">
        

	    <meta name="author" content="MwumLi">
	
        <!-- syntax highlighting CSS -->
		<link rel="shortcut icon" href="/assets/imgs/favicon.ico" type="image/vnd.microsoft.icon">
        <!-- Custom CSS -->
		<link rel="stylesheet" href="/assets/themes/custom_me/css/cikonss.css"}}" />
        <link rel="stylesheet" href="/assets/themes/custom_me/css/main.css" type="text/css" media="all">
        <link rel="stylesheet" href="/assets/themes/custom_me/css/pygments.css" type="text/css" media="all">
        <link rel="stylesheet" href="/assets/themes/custom_me/css/jquery.mCustomScrollbar.min.css" type="text/css" media="all">`
        <link rel="stylesheet" href="/assets/themes/custom_me/css/bigfoot-number.css" type="text/css" media="all">

    </head>
    <body>
        <div id="all">
<!--            header start-->
            <div id="header">
                <div id="title">
                <h1 >
                    <a href="/">倘若微小<span class="title-tagline">---人生最美妙的风景就是内心的淡定和从容</span>
					</a>                     	   
				</h1>
                </div>
                <!--hr/ -->
                <div id="top-nav">
                    <ul>
					



    
  	
  
  
  
	  
	  			

  
	  
	  
  	 		
      		
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  

  
  		<li><a href="/pages/micro_say/2015.html">微语</a></li>
  



					<li><a href="/pages/articles/index.html">文章</a></li>
					<li><a href="/pages/categories/index.html">分类</a></li>
					<li><a href="/pages/tags/index.html">标签</a></li>
					<li><a href="/rss.xml">rss订阅</a></li>
					</ul>   
                </div>
            </div> 
<!--            header end-->
            <!--hr /-->
            <div class="content">
                


<div class="page-header">
	<h1>Linux下php扩展安装 <small></small></h1>
	<div id="article_header">
		
		
		<div>
			<span>分类: </span>
			<a href="/pages/categories/index.html#记录-ref" class="tag">记录</a> 
			
				<span>标签: </span>
			
			
				<a href="/pages/tags/index.html#Web-ref" class="tag">Web</a>
    		
				<a href="/pages/tags/index.html#Php-ref" class="tag">Php</a>
    		
				<a href="/pages/tags/index.html#Apache-ref" class="tag">Apache</a>
    		
		</div>		
		<div>
			Last Modify in
			
			<span>2015-12-04</span>,
			
			published in <span>2015-04-24</span> 
			by <span> MwumLi</span>
		</div>

		
		
	</div>
</div>

<div id="page-content">
    
<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">碎碎念</a></li>
  <li><a href="#extensiondir--extension" id="markdown-toc-extensiondir--extension">extension_dir 和 extension</a>    <ul>
      <li><a href="#extensiondir-" id="markdown-toc-extensiondir-">extension_dir 实际生效值</a></li>
      <li><a href="#section-1" id="markdown-toc-section-1">检验扩展是否应用</a></li>
    </ul>
  </li>
  <li><a href="#php" id="markdown-toc-php">安装并添加php扩展</a></li>
  <li><a href="#phpize-" id="markdown-toc-phpize-">phpize 的安装</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">几个扩展常用扩展安装</a>    <ul>
      <li><a href="#mccrypt-" id="markdown-toc-mccrypt-">MCcrypt 扩展的安装</a></li>
      <li><a href="#igbinary-" id="markdown-toc-igbinary-">igbinary 扩展的安装</a></li>
      <li><a href="#redis-" id="markdown-toc-redis-">redis 扩展的安装</a></li>
      <li><a href="#mongo-" id="markdown-toc-mongo-">mongo 扩展的安装</a></li>
    </ul>
  </li>
</ul>

<h2 id="section">碎碎念</h2>

<p>通过搭建 <a href="/lamp-build">LAMP 环境</a>, 就可以使用 php 进行动态网站开发</p>

<p>但有的时候增强 php 对某些特殊功能, 比如对 mongodb 的操纵, redis 的访问等</p>

<p>这时候, 你就需要为 php 安装并配置相应扩展, 即 extension</p>

<h2 id="extensiondir--extension">extension_dir 和 extension</h2>

<p>php 有一个变量定义了 extension 在你的系统中的存放位置, 那就是 <code>extension_dir</code><br />
只有 extension 存放到 <code>extension_dir</code> 的指定路径, 那么 php 才能正确读取</p>

<p>关于 <code>extension_dir</code> :</p>

<ol>
  <li>默认值 : <code>php -i | grep extension_dir</code></li>
  <li>
    <p>重新指定<br />
在  <code>/etc/php5/apache2/php.ini</code> 进行指定, 比如 :</p>

    <pre><code>extension_dir="/usr/share/php_extension"
</code></pre>
  </li>
</ol>

<h3 id="extensiondir-">extension_dir 实际生效值</h3>

<ol>
  <li>
    <p>在你的 Apache 目录下新建文件 <code>phpinfo.php</code>, 内容如下 :</p>

    <pre><code> &lt;?php
     phpinfo();
 ?&gt;
</code></pre>
  </li>
  <li>
    <p>访问 <code>phpinfo.php</code>, 搜索 <code>extension_dir</code>, 可以看到当前 php 寻找 extension 的路径</p>
  </li>
</ol>

<h3 id="section-1">检验扩展是否应用</h3>

<p>访问 <code>phpinfo.php</code>，搜索你的扩展，比如 <code>redis</code></p>

<p>如果你的扩展放到 <code>extension_dir</code> 并且已经添加到 php 的 apache 配置文件，那么就会搜索到<br />
如果没有搜索到 :</p>

<ol>
  <li>查看 <code>extension_dir</code> 下有没有你的 extension</li>
  <li>
    <p>确认是否在 <code>/etc/php5/apache2/php.ini</code> 中添加此 extension, 比如 redis :</p>

    <pre><code> [redis]
 extension=redis.so
</code></pre>
  </li>
  <li>重启服务器 : <code>sudo service apache2 restart</code></li>
  <li>可以留言共同讨论或者谷歌</li>
</ol>

<h2 id="php">安装并添加php扩展</h2>

<ol>
  <li>
    <p>下载并安装下载相应扩展(请自行搜索)</p>

    <pre><code> http://php.net/manual/zh/extensions.php  
</code></pre>
  </li>
  <li>
    <p>添加扩展到配置文件<code>/etc/php5/apache2/php.ini</code><br />
 (以<code>redis</code>为例)</p>

    <pre><code> [redis]
 extension=redis.so
</code></pre>

    <p>添加文件末尾即可</p>
  </li>
  <li>
    <p>重启web服务器</p>

    <pre><code> sudo service apache2 restart
</code></pre>
  </li>
</ol>

<h2 id="phpize-">phpize 的安装</h2>

<p>用 C 开发的 PHP 扩展使用动态链接库的方式编译扩展模块，需要用到 <code>phpize</code></p>

<p>这个工具在使用 <code>apt-get install php5</code> 默认情况也是没安装的</p>

<p>执行以下命令去安装 :</p>

<pre><code>$ sudo apt-get install php5-dev
</code></pre>

<h2 id="section-2">几个扩展常用扩展安装</h2>

<h3 id="mccrypt-">MCcrypt 扩展的安装</h3>

<ol>
  <li>
    <p>安装 : <code>sudo apt-get install php5-mcrypt</code></p>
  </li>
  <li>
    <p>添加配置 <code>/etc/php5/apache2/php.ini</code>:</p>

    <pre><code> [mcrypt]
 extension=mcrypt.so
</code></pre>
  </li>
  <li>
    <p>重启web服务器</p>
  </li>
</ol>

<h3 id="igbinary-">igbinary 扩展的安装</h3>

<ol>
  <li>
    <p>安装 : <code>sudo pecl install igbinary</code></p>
  </li>
  <li>
    <p>添加配置 <code>/etc/php5/apache2/php.ini</code>:</p>

    <pre><code>[igbinary]
extension=igbinary.so
</code></pre>
  </li>
  <li>
    <p>重启web服务器</p>
  </li>
</ol>

<h3 id="redis-">redis 扩展的安装</h3>

<p>官方文档 : <a href="https://github.com/phpredis/phpredis#installingconfiguring">https://github.com/phpredis/phpredis#installingconfiguring</a></p>

<ol>
  <li>
    <p>下载, 编辑, 安装 :</p>

    <pre><code> $ git clone https://github.com/phpredis/phpredis.git
 $ phpize
 $ ./configure [--enable-redis-igbinary]
 $ make &amp;&amp; sudo make install
</code></pre>

    <p>这样 redis 就被安装在合适的位置<br />
如果需要 <code>--enable-redis-igbinary</code>, 请先进行 <code>igbinary 扩展的安装</code></p>
  </li>
  <li>
    <p>添加扩展到配置文件<code>/etc/php5/apache2/php.ini</code></p>

    <pre><code> [redis]                            
 extension=redis.so
</code></pre>
  </li>
  <li>
    <p>重启web服务器</p>
  </li>
</ol>

<h3 id="mongo-">mongo 扩展的安装</h3>

<p>官方文档: <a href="http://php.net/manual/zh/mongo.installation.php">http://php.net/manual/zh/mongo.installation.php</a></p>

<ol>
  <li>
    <p>下载，编译，安装:</p>

    <pre><code> $ git clone https://github.com/mongodb/mongo-php-driver-legacy.git
 $ cd mongo-php-driver-legacy
 $ phpize
 $ ./configure
 $ make all &amp;&amp; sudo make install
 ...
 Installing shared extensions:     
 /usr/lib/php5/20121212+lfs/
</code></pre>
  </li>
  <li>
    <p>添加配置 <code>/etc/php5/apache2/php.ini</code>:</p>

    <pre><code> [mongo.so]
 extension=mongo.so
</code></pre>
  </li>
  <li>
    <p>重启web服务器</p>
  </li>
</ol>


    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev">上一篇: <a href="/raspberrypi-install" title="Raspberry Pi安装Debian Wheezy系统">Raspberry Pi安装Debian Wheezy系统</a></li>
      
      
        <li class="next">下一篇: <a href="/leave-beijing" title="离去">离去</a></li>
      
      </ul>
    </div>
    <hr>
	<div id="to_comments">
	


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'ifmicro'; // required: replace example with your forum shortname
	    /* * * DON'T EDIT BELOW THIS LINE * * */
	    (function() {
		         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
								     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





	</div>

 </div>


   
            </div>
            <hr />
            <div id="footer">
                <p>
                <span>&copy;2014 MwumLi</span>
                </p>
            </div>
        </div>
		
		<!-- site top -->
		<div class="nav-bottom">
			<span class="icon icon-mid" id="site-top" title="滑动到顶部"><span class="icon-arrowUp"></span></span>
			<span class="icon icon-mid" id="site-comment" title="去评论"><span class="icon-comment-text"></span></span>
			<span class="icon icon-mid" id="site-bottom" title="滑动到底部"><span class="icon-arrowDown"></span></span>
		</div>

		


		<script src="/assets/themes/custom_me/js/jquery-2.1.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="/assets/themes/custom_me/js/jquery.zclip.js"></script>

		
		<script src="/assets/themes/custom_me/js/copy.js"></script>
		
		
		

		<script src="http://cdn.bootcss.com/underscore.js/1.8.3/underscore.js"></script>
		<script src="/assets/themes/custom_me/js/toc.js"></script>
		<script src="/assets/themes/custom_me/js/jquery.resizeEnd.js"></script>
		<script src="/assets/themes/custom_me/js/jquery.mCustomScrollbar.concat.min.js"></script>
	
		<script src="/assets/themes/custom_me/js/bigfoot.js"></script>
		<script src="/assets/themes/custom_me/js/toComments.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).ready(function(){
//				if(navigator.userAgent.indexOf("Firefox") != -1) {
//					$("li p").parent().css("list-style-position", "outside");
//				}
					
				
				addCopy("pre", "copy", "Copy");
				

				tocEffect();
				toComments();
				var bigfoot=$.bigfoot({
					preventPageScroll: true
					})

			})
		</script>	
 </div>
    </body>
</html>




