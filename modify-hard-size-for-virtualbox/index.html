
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <title>倘若微小 - 调整 virtualbox 虚拟机磁盘大小</title>
        
        <meta name="description" content="你可以在 virtualbox 虚拟机构建以后, 重新调整虚拟机磁盘大小">
        
        <meta name="author" content="MwumLi">

        <!-- -Site Icon -->
        <link rel="shortcut icon" href="/assets/imgs/favicon.ico" type="image/vnd.microsoft.icon">
        <!-- Custom CSS -->
	
        <link rel="stylesheet" href="/assets/themes/custom-me/css/main.css" type="text/css" media="all" />
        
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <!-- Fav and touch icons -->
        <!-- Update these with your own images
          <link rel="shortcut icon" href="images/favicon.ico">
          <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
          <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
          <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
        -->

        <!-- atom & rss feed -->
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
        <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    </head>
    <body>
        <div id="all">
            <div id="header">
                <div id="title">
					<h1 ><a href="/">倘若微小<span class="title-tagline">---人生最美妙的风景就是内心的淡定和从容</span></a>                           
					</h1>
                </div>

                <div id="top-nav">
                    <ul>
                    


<li><a href="/pages/micro-say/2016.html">微语</a></li>



<li><a href="/pages/articles/">文章</a></li>



<li><a href="/pages/categories/">分类</a></li>



<li><a href="/pages/tags/">标签</a></li>



<li><a href="/rss.xml">订阅</a></li>


	


                    </ul>   
                </div>
            </div> 

            <div class="content">
                
<div class="page-header">
    <h1>调整 virtualbox 虚拟机磁盘大小 <small></small></h1>
    <div id="article_header">
        
        
        <div>
            <span>分类: </span>
            <a href="/pages/categories/#记录-ref" class="tag">记录</a> 
            
                <span>标签: </span>
            
            
                <a href="/pages/tags/#VirtualBox-ref" class="tag">VirtualBox</a>
            
        </div>      
        <div>
            Last Modify in
            
            <span>2016-07-07</span>,
            
            published in <span>2016-07-07</span> 
            by <span> MwumLi</span>
        </div>

        
        
    </div>
</div>

<div id="page-content">
    

<p>VirtualBox 是一个免费的虚拟化产品, 可以用来构建虚拟机  <br />
它可以运行各大平台(Mac/Linux/OS) 上, 可以支持现有的绝大部分系统</p>

<p>VirtualBox 的构建的虚拟机一旦构建完毕, 磁盘的配置就几乎不能更改了, 至少从其界面并没有看到任何可以更改的操作</p>

<p>但是并不是没有办法, VirtualBox 安装完成之后, 同时还集成安装了 VirtualBox 的一些工具命令</p>

<p>比如 <code>VBoxManage</code>, 我们今天用它来解决调整 virtualbox 虚拟机磁盘大小这个问题</p>

<ol>
  <li>
    <p>进入 Virutalbox 存放 VM 的路径,找到你的虚拟机的文件夹并进入  <br />
快捷方法 : <code>打开 virtualbox -&gt; 右键你要操作的 VM -&gt; 在文件搜索器 Finder 中显示</code>  <br />
我这里只是写了 Mac 下的操作内容, 其他平台也相差不多, 就最后一步的右键菜单内容有点不一样, 不过聪明的你一定知道怎么选择</p>

    <pre><code> # 假设我们已经进来, VirtualBox 具体镜像文件夹下的目录内容如下
 $ ls
 Logs                                         docker_default_1462932932793_38985.vbox
 Snapshots                                    docker_default_1462932932793_38985.vbox-prev
 box-disk1.vmdk
</code></pre>
  </li>
  <li>
    <p>查看磁盘文件信息, 记录原来磁盘文件的 uuid</p>

    <pre><code> $ VBoxManage showhdinfo box-disk1.vmd
 UUID:           6f5838ee-4319-4885-8eea-6276c9fbbe37
 Parent UUID:    base
 State:          locked write
 Type:           normal (base)
 Location:       /Users/Luo/VirtualBox VMs/docker_default_1462932932793_38985/box-disk1.vmdk
 Storage format: VMDK
 Format variant: dynamic default
 Capacity:       40960 MBytes
 Size on disk:   2795 MBytes
 Encryption:     disabled
 In use by VMs:  docker_default_1462932932793_38985 (UUID: 76746809-f711-4936-915c-49e27195d4f7) 可以看到 old UUID : `6f5838ee-4319-4885-8eea-6276c9fbbe37`  
</code></pre>
  </li>
  <li>
    <p>克隆 <code>.vmdk</code> 镜像为一个 <code>.vdi</code>  镜像</p>

    <pre><code> $ VBoxManage clonehd box-disk1.vmdk new-disk1.vdi --format vdi
 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
 Clone medium created in format 'vdi'. UUID: af5fbd4d-b4f9-4392-b78d-00822b3c32ca
</code></pre>
  </li>
  <li>
    <p>调整 <code>.vdi</code> 镜像的大小  <br />
比如调整为 50G (51200MB)</p>

    <pre><code> $ VBoxManage modifyhd new-disk.vdi --resize 51200
 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
</code></pre>
  </li>
  <li>
    <p>克隆 <code>.vdi</code> 镜像为一个 <code>.vmdk</code> 镜像</p>

    <pre><code> $ VBoxManage clonehd new-disk.vdi resized-disk.vmdk --format vmdk
 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
 Clone medium created in format 'vmdk'. UUID: 362b43f9-f562-49c9-8218-1235be0d16a7 记下 new UUID : `362b43f9-f562-49c9-8218-1235be0d16a7`
</code></pre>
  </li>
  <li>
    <p>修改虚拟机镜像目录下的 <code>.box</code> 后缀的文件  <br />
&gt; 使用 <code>new UUID</code> 替换所有的 <code>old UUID</code>  <br />
&gt; 使用 <code>resized-disk.vmdk</code> 替换所有的 <code>box-disk1.vmdk</code></p>
  </li>
</ol>

<p>至此, 虚拟机的磁盘大小已经从 40G 调整到 50G  <br />
(以前的 box-disk1.vmdk 和 中间生成的 new-disk1.vdi 文件你可以清除掉了)</p>

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev">上一篇: <a href="/docker-install-and-usage" title="Docker 的安装与使用">Docker 的安装与使用</a></li>
      
      
        <li class="next-disabled">下一篇: 让时间加速吧
      
      </ul>
    </div>

    <hr>

    <div id="to_comments">
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_developer = 1;
    var disqus_shortname = 'ifmicro'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    </div>
 </div>

   
            </div>

            <hr />

            <div id="footer" class="footer">
                <p>
				&copy;2014-2016 <a href="http://www.ifmicro.com/">倘若微小</a><br />
Powered by <a href="https://jekyllrb.com/">jekyll</a> | Hosted by <a href="https://github.com/">github</a> | Designed by <a href="http://www.ifmicro.com/">MwumLi</a><br />
本站采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享 署名-非商业性使用 4.0 国际 许可协议</a>进行许可。

                </p>
            </div>
        </div>
        
        <!-- site top -->
        <div class="nav-bottom">
            <span class="icon icon-mid site-top" id="site-top" title="滑动到顶部"><span class="icon-arrowUp"></span></span>
            <span class="icon icon-mid .site-comment" id="site-comment" title="去评论"><span class="icon-comment-text"></span></span>
            <span class="icon icon-mid .site-bottom" id="site-bottom" title="滑动到底部"><span class="icon-arrowDown"></span></span>
        </div>

        




        <script src="/assets/themes/custom-me/js/jquery-2.1.3.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/assets/themes/custom-me/js/jquery.zclip.js"></script>

        
        <script src="/assets/themes/custom-me/js/copy.js"></script>
        
        
        

        <script src="http://cdn.bootcss.com/underscore.js/1.8.3/underscore.js"></script>
        <script src="/assets/themes/custom-me/js/toc.js"></script>
        <script src="/assets/themes/custom-me/js/jquery.resizeEnd.js"></script>
        <script src="/assets/themes/custom-me/js/jquery.mCustomScrollbar.concat.min.js"></script>
    
        <script src="/assets/themes/custom-me/js/bigfoot.js"></script>
        <script src="/assets/themes/custom-me/js/toComments.js"></script>
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function(){
                    
                
                addCopy("pre", "copy", "Copy");
                

				
                tocEffect();
				

                toComments();
                $.bigfoot({
                    preventPageScroll: true
                })

            })
        </script>   
 </div>
    </body>
</html>



