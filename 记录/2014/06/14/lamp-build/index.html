


<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
		<title>LAMP 环境搭建 | 微尘</title>

  		
		<meta name="description" content="">
        

	    <meta name="author" content="Liluo">
	
        <!-- syntax highlighting CSS -->
		<link rel="shortcut icon" href="/assets/imgs/favicon.ico" type="image/vnd.microsoft.icon">
        <!-- Custom CSS -->
		<link rel="stylesheet" href="/assets/themes/custom_me/css/cikonss.css"}}" />
        <link rel="stylesheet" href="/assets/themes/custom_me/css/main.css" type="text/css" media="all">
        <link rel="stylesheet" href="/assets/themes/custom_me/css/pygments.css" type="text/css" media="all">
        <link rel="stylesheet" href="/assets/themes/custom_me/css/jquery.mCustomScrollbar.min.css" type="text/css" media="all">`
        <link rel="stylesheet" href="/assets/themes/custom_me/css/bigfoot-number.css" type="text/css" media="all">

    </head>
    <body>
        <div id="all">
<!--            header start-->
            <div id="header">
                <div id="title">
                <h1 >
                    <a href="/">微尘<span class="title-tagline">---人生最美妙的风景就是内心的淡定和从容</span>
					</a>                     	   
				</h1>
                </div>
                <!--hr/ -->
                <div id="top-nav">
                    <ul>
					



    
  	
  
  
  
	  
	  			

  
	  
	  
  	 		
      		
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  

  
  		<li><a href="/pages/micro_say/2015.html">微语</a></li>
  



					<li><a href="/pages/articles/index.html">文章</a></li>
					<li><a href="/pages/categories/index.html">分类</a></li>
					<li><a href="/pages/tags/index.html">标签</a></li>
					<li><a href="/rss.xml">rss订阅</a></li>
					</ul>   
                </div>
            </div> 
<!--            header end-->
            <!--hr /-->
            <div class="content">
                


<div class="page-header">
	<h1>LAMP 环境搭建 <small></small></h1>
	<div id="article_header">
		
		
		<div>
			<span>分类: </span>
			<a href="/pages/categories/index.html#记录-ref" class="tag">记录</a> 
			
				<span>标签: </span>
			
			
				<a href="/pages/tags/index.html#LAMP-ref" class="tag">LAMP</a>
    		
				<a href="/pages/tags/index.html#linux-ref" class="tag">linux</a>
    		
				<a href="/pages/tags/index.html#apache-ref" class="tag">apache</a>
    		
				<a href="/pages/tags/index.html#mysql-ref" class="tag">mysql</a>
    		
				<a href="/pages/tags/index.html#php-ref" class="tag">php</a>
    		
				<a href="/pages/tags/index.html#web-ref" class="tag">web</a>
    		
		</div>		
		<div>
			Last Modify in
			
			<span>2014-06-14</span>,
			
			published in <span>2014-06-14</span> 
			by <span> LiLuo</span>
		</div>

		
		
	</div>
</div>

<div id="page-content">
    
<h2 id="ubuntulamp">Ubuntu下LAMP环境搭建</h2>

<h3 id="apache">安装apache服务器</h3>

<pre><code>$ sudo apt-get install apache2
</code></pre>

<p>安装完成，在浏览器中输入<code>http://localhost</code>,出现<code>It works</code>okay,安装完成</p>

<h4 id="section">默认工作目录</h4>
<p>不同版本的apache，工作目录有点差异<br />
我的机器apache版本:<code>Server version: Apache/2.4.7 (Ubuntu)</code><br />
所以默认工作目录是：</p>

<pre><code>/var/www/html
</code></pre>

<p>当然，你可以自定义虚拟主机目录:<br />
1. 修改<em>/etc/apache2/sites-enabled/000-default.conf</em>的<code>DocumentRoot /home/ya/LAMP</code>为<code>DocumentRoot /home/ya/LAMP</code><br />
2. 添加目录权限，需要添加下面这句：</p>

<pre><code>&lt;Directory /home/ya/LAMP/&gt;
	Options Indexes FollowSymLinks
	AllowOverride None
	Require all granted
&lt;/Directory&gt;
</code></pre>

<p>添加的地方有两处，任选一处即可：<br />
 * 刚才修改的那句之后添加<br />
 * 在<em>/etc/apache2/apache2.conf</em>中寻找<code>Directory</code>字眼，在这之后添加，其实也无所谓，只是放着之后，方便管理</p>

<h4 id="apache2">apache2的配置布局</h4>

<pre><code>/etc/apache2/
|-- apache2.conf
|       `--  ports.conf
|-- mods-enabled
|       |-- *.load
|       `-- *.conf
|-- conf-enabled
|       `-- *.conf
|-- sites-enabled
|       `-- *.conf
</code></pre>

<ul>
  <li><code>apache2.conf</code> 主配置文件<br />
当web服务器启动时，加载此文件，而此文件包含了其他配置文件</li>
  <li><code>ports.conf</code> 定制监听端口  <br />
被包含在<code>apache2.conf</code>,并且可以随时修改</li>
  <li><code>mods-enabled/*.conf</code>, <code>conf-enabled/*.conf</code>,<code>sites-enabled/*.conf</code>下的配置文件分别是用来管理模块，全局配置片段，虚拟主机配置</li>
</ul>

<h4 id="apache2-1">apache2的启动和停止</h4>
<p>由于环境变量和加载配置的原因，我们不能直接使用<code>/usr/bin/apache2</code>,需要使用<code>/etc/init.d/apache2</code>,或者启用服务<code>service apache2</code></p>

<h5 id="apache2-2">apache2的启动</h5>

<pre><code>$ sudo /usr/bin/apache2 -k start	或者  	
$ sudo service apache2 start
</code></pre>

<h5 id="apache2-3">apache2的停止</h5>

<pre><code>$ sudo /usr/bin/apache2 -k stop	或者  	
$ sudo service apache2 stop  
</code></pre>

<h5 id="apache2-4">apache2的再启动</h5>

<pre><code>$ sudo /usr/bin/apache2 -k restart	或者  	
$ sudo service apache2 restart
</code></pre>

<h5 id="apache2-5">查看apache2的状态</h5>

<pre><code>$ service apache2 status
</code></pre>

<p>或者， 直接访问<code>http://localhost</code></p>

<h3 id="mysql">安装MySQL数据库</h3>

<pre><code>$ sudo apt-get install mysql-server  
</code></pre>

<p>安装mysql服务器的过程中，会自动安装mysql的命令行工具mysql-client，还有其他的一些工具<br />
同时安装途中，需要为mysql设置root用户密码</p>

<h4 id="section-1">测试</h4>
<p>输入下面命令，按提示输入密码</p>

<pre><code>$ mysql -uroot -p
Enter password: 
</code></pre>

<p>加入安装成功，出现下面画面:</p>

<pre><code>Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 53
Server version: 5.5.37-0ubuntu0.14.04.1 (Ubuntu)

Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; 
</code></pre>

<h4 id="mysql-1">配置MySQL</h4>

<h5 id="mysql-2">MySQL常用命令</h5>
<p>MySQL大部分命令是以<code>;</code>结尾<br />
1. 进入mysql</p>

<pre><code>	$ mysql -h [服务器地址] -u [用户名〕-p
</code></pre>

<p>这是访问本地服务器</p>

<pre><code>	$ mysql -h 127.0.0.1 -u [用户名〕 -p
</code></pre>

<p>如：<code>$ mysql -h 127.0.0.1 -u root -p</code>
认证成功之后就进入mysql的命令控制台，以下都是在mysql的命令控制台的命令。</p>

<ol>
  <li>
    <p>显示已经存在的数据库</p>

    <pre><code> mysql&gt; SHOW DATABASES;
</code></pre>
  </li>
  <li>
    <p>创建数据库(linux下是区分大小写)</p>

    <pre><code> CREATE DATABASE [数据库名];
</code></pre>
  </li>
  <li>
    <p>创建一个受限用户 这个用户(testuser)只有一个数据库(这里是test库)的访问写入权限，这个数据库创建与删除表的权限，并且只能在本地登入，密码为userpasswd</p>

    <pre><code> grant select,insert,update,delete,create,alter on test.* to 'test'@'localhost' IDENTIFIED BY 'userpasswd';
</code></pre>
  </li>
</ol>

<p>5.退出数据库</p>

<pre><code>	quit 或者 \q
</code></pre>

<h5 id="mysql-3">MySQL配置文件（新手、无特殊要求勿动）</h5>

<pre><code>sudo vim /etc/mysql/my.cnf
</code></pre>

<p>这里有一个地方要注意 默认：是只允许本地访问数据库的这里不是说本机架设了网站，用户通过架设在的网页不能访问MySQL ,是指其它机子不能直接访问MySQL</p>

<pre><code>bind-address 127.0.0.1
</code></pre>

<p>解除限制只能本地访问mysql，如果需要其他机器访问，应使用如下语句，把这<code>bind-address 127.0.0.1</code>句话用<code>#</code>注释掉</p>

<pre><code>#bind-address 127.0.0.1
</code></pre>

<h3 id="php">安装PHP以及一些必要的模块</h3>

<pre><code>$ sudo apt-get install php5 libapache2-mod-php5 php5-mysql
</code></pre>

<p><em>为什么安装<code>libapache2-mod-php5</code>?</em></p>

<p>安装这个软件包时，它会自动向<code>/etc/apache2/mods-available</code>写入PHP的配置文件<code>php5.conf</code>和 <code>php5.load</code>，并把它们链接到了<code>/etc/apache2/mods-enabled</code>目录。<br />
安装的最后，软件包自动重新载入apache配置，php就可以在apache上跑了。无需手动的把Apache与PHP关联到一起。<br />
没有它，会出现<code>无法解析php文件，浏览器提示下载所要打开的php文件</code></p>

<pre><code>$ sudo a2enmod php5
</code></pre>

<p>假如没安装<code>libapache2-mod-php5</code>,则提示</p>

<pre><code>This module does not exist!
</code></pre>

<p><code>a2enmod</code>和 <code>a2dismod</code>  enable or disable an apache2 module</p>

<p><em>为什么要安装<code>php5-mysql</code>？</em></p>

<p>因为该软件包会向<code>/etc/php5/conf.d</code>目录写入配置文件，使得PHP能够支持mysql。</p>

<h4 id="section-2">测试</h4>
<p>在apache的默认工作目录下(/var/www/html)中新建文件phpinfo.php,内容为:</p>

<pre><code>&lt;? php phpinfo() ?&gt;
</code></pre>

<p>在浏览器窗口输入<code>http://localhost/phpinfo.php</code>,若出现php的相关信息，则安装成功</p>

<h3 id="phpmyadmin">安装phpmyadmin</h3>
<p>phpmyadmin是一个图形化的数据库管理软件<br />
推荐从官网下载安装与配置<br />
首先从<a href="http://www.phpmyadmin.net/home_page/" title="phpMyAdmin官网">官网下载</a></p>

<p>然后解压缩到<code>apache</code>工作目录(默认为/var/www/html)下的<code>phpMyAdmin</code>(没有，自行创建)</p>

<p>修改其配置文件(config.sample.inc.php)为<code>config.inc.php</code></p>

<pre><code>$ cd /var/www/html/phpMyAdmin
$ sudo cp config.sample.inc.php config.inc.php
$ vim config.inc.php
</code></pre>

<p>找到“blowfish_secret”在后面填上任意字母</p>

<pre><code>$cfg['Servers'][$i]['auth_type']='cookie';
$cfg['Servers'][$i]['host']='localhost';
$cfg['Servers'][$i]['connect_type']='tcp';
$cfg['Servers'][$i]['compress']='false';
</code></pre>

<p>上面这四句基本都有，只需添加下面这句即可</p>

<pre><code>$cfg['Servers'][$i]['extension']='mysql';	
</code></pre>

<p>保存退出，继续安装php5-mcrypt</p>

<pre><code>$ sudo apt-get install php5-mcrypt  
</code></pre>

<p>编辑php配置文件</p>

<pre><code>$ sudo vim etc/php5/apache2/php.ini
</code></pre>

<p>在<code>extension</code>下面加上（任意独立一行）:</p>

<pre><code>extension=php_mcrypt.so
</code></pre>

<p>保存后，重启apache2</p>

<pre><code>$ sudo service apache2 restart
</code></pre>

<p>在浏览器里输入<code>http://localhost/phpMyAdmin</code> <br />
出现登陆数据库界面，嗯，成功了，终于不用面对那么冷淡的终端了</p>

<h3 id="section-3">配置文件路径</h3>
<ol>
  <li>apache 的配置文件路径 <code>/etc/apache2/apache2.conf</code></li>
  <li>
    <p>apache 网站字符编码配置路径 <code>/etc/apache2/conf-enabled/charset.conf</code></p>
  </li>
  <li>
    <p>php.ini 路径 <code>/etc/php5/apache2/php.ini</code></p>
  </li>
  <li>
    <p>mysql配置文件 路径 <code>/etc/mysql/my.cnf</code>   一般不要使用，尤其是新手</p>
  </li>
  <li>默认网站根目录<code>/var/www/html</code>(据说网站根目录应该是<code>/var/www</code>，但我安装完之后，却不是这样的，难道改变了?)</li>
</ol>


    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev">上一篇: <a href="/%E8%AE%B0%E5%BD%95/2014/06/10/linux-file-system" title="Linux文件系统的创建和挂载">Linux文件系统的创建和挂载</a></li>
      
      
        <li class="next">下一篇: <a href="/%E8%AE%B0%E5%BD%95/2014/08/03/websites-by-github-pages" title="为你和你的项目建立一个站点--Github Pages">为你和你的项目建立一个站点--Github Pages</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'ifmicro'; // required: replace example with your forum shortname
	    /* * * DON'T EDIT BELOW THIS LINE * * */
	    (function() {
		         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
								     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





 </div>


   
            </div>
            <hr />
            <div id="footer">
                <p>
                <span>&copy;2014 Liluo</span>
                </p>
            </div>
        </div>
		
		<!-- site top -->
		<div id="site-top"><a href="#" title="Return to Top">TOP</a></div>

		


		<script src="/assets/themes/custom_me/js/jquery-2.1.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="/assets/themes/custom_me/js/jquery.zclip.js"></script>
		<script src="/assets/themes/custom_me/js/copy.js"></script>
		<script src="http://cdn.bootcss.com/underscore.js/1.8.3/underscore.js"></script>
		<script src="/assets/themes/custom_me/js/toc.js"></script>
		<script src="/assets/themes/custom_me/js/jquery.resizeEnd.js"></script>
		<script src="/assets/themes/custom_me/js/jquery.mCustomScrollbar.concat.min.js"></script>

		<script src="/assets/themes/custom_me/js/bigfoot.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).ready(function(){
						
				addCopy("pre", "copy", "Copy");
				tocEffect();

				var bigfoot=$.bigfoot({
					preventPageScroll: true
					})

			})
		</script>	
 </div>
    </body>
</html>




