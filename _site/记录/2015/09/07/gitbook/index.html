<!DOCTYPE html>


<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>倘若微小 - 用 gitbook 来写书</title>
  
  <meta name="description" content="讲述 gitbook 的安装、配置、使用, 并以一个实例讲述了一个写书的过程">
  
  <meta name="author" content="MwumLi">

  <!-- -Site Icon -->
  <link rel="shortcut icon" href="/assets/imgs/favicon.ico" type="image/vnd.microsoft.icon">
  <!-- Custom CSS -->

  <link rel="stylesheet" href="/assets/css/main.css" type="text/css" media="all" />
  



  

  

  

  
  
  <link rel="stylesheet" href="/assets/css/bigfoot-number.css?2.1.4" type="text/css">
  
  

  
  
  <link rel="stylesheet" href="/assets/lib/fancybox/source/jquery.fancybox.css?2.1.5" type="text/css">
  
  




  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

  <!-- atom & rss feed -->
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
  <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
</head>

  <body>
    <div class="container">
      <header class="site-header">
        <div class="site-wrapper clearfix">
          <a class="site-title" href="/">倘若微小</a>
<button class="site-nav-toggle">
  <span></span>
  <span></span>
  <span></span>
</button>
<nav class="site-nav">
  




<a class="page-link" href="/micro-say/2017/">微语</a>





<a class="page-link" href="/pages/archive/">归档</a>





<a class="page-link" href="/pages/categories/">分类</a>





<a class="page-link" href="/pages/tags/">标签</a>





<a class="page-link" href="/rss.xml">订阅</a>




</nav>


        </div>
      </header>
      <main class="site-main">
        <div class="site-wrapper clearfix">
          <div class="page-header">
    <h1>用 gitbook 来写书 <small></small></h1>
    <div class="article-header">
        
        
        <div>
            <span>分类: </span>
            <a href="/pages/categories/?names=记录" class="tag">记录</a>
            
                <span>标签: </span>
            
            
                <a href="/pages/tags/?names=cmd#tag-search-list" class="tag">cmd</a>
            
                <a href="/pages/tags/?names=Linux#tag-search-list" class="tag">Linux</a>
            
        </div>
        <div>
            Last Modify in
            
            <span>2015-10-06</span>,
            
            published in <span>2015-09-07</span>
            by <span> MwumLi</span>
        </div>

        
        
    </div>
</div>

<div id="page-content">
    
<ul id="markdown-toc">
  <li><a href="#gitbook-" id="markdown-toc-gitbook-">GitBook 是什么</a></li>
  <li><a href="#gitbook--1" id="markdown-toc-gitbook--1">GitBook 能做些什么</a></li>
  <li><a href="#ubuntu--gitbook-" id="markdown-toc-ubuntu--gitbook-">Ubuntu 下 gitbook 的安装</a></li>
  <li><a href="#gitbook--2" id="markdown-toc-gitbook--2">用 gitbook 来写书</a></li>
  <li><a href="#gitbook--3" id="markdown-toc-gitbook--3">gitbook 的命令小结</a>    <ul>
      <li><a href="#section" id="markdown-toc-section">构建和运行</a></li>
      <li><a href="#pdfepubmobi" id="markdown-toc-pdfepubmobi">生成电子书(PDF、ePub和Mobi)</a></li>
      <li><a href="#section-1" id="markdown-toc-section-1">指定一个版本</a></li>
      <li><a href="#section-2" id="markdown-toc-section-2">管理版本</a></li>
    </ul>
  </li>
  <li><a href="#css" id="markdown-toc-css">自定义书本的 css</a></li>
  <li><a href="#section-3" id="markdown-toc-section-3">用插件来丰富你的书</a>    <ul>
      <li><a href="#section-4" id="markdown-toc-section-4">发现插件</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">安装插件</a></li>
      <li><a href="#section-6" id="markdown-toc-section-6">一些插件</a>        <ul>
          <li><a href="#disqus-----disqushttppluginsgitbookcomplugindisqus" id="markdown-toc-disqus-----disqushttppluginsgitbookcomplugindisqus">disqus 评论系统 – <a href="http://plugins.gitbook.com/plugin/disqus">disqus</a></a></li>
          <li><a href="#autocoverhttppluginsgitbookcompluginautocover" id="markdown-toc-autocoverhttppluginsgitbookcompluginautocover">自动化封面 – <a href="http://plugins.gitbook.com/plugin/autocover">autocover</a></a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#gitbook--4" id="markdown-toc-gitbook--4">GitBook 相关链接</a></li>
</ul>

<h2 id="gitbook-">GitBook 是什么</h2>

<p>GitBook 是一个可以用来构建一本漂亮的电子书的命令行工具<sup id="fnref:gitbook-online"><a href="#fn:gitbook-online" class="footnote">1</a></sup> , 基于 Node.js</p>

<p>可以使用 Markdown 文法来写作</p>

<p>只要你部署好一定的目录结构并且完成书的内容，就能通过命令很方便地转化成网页和其它格式的电子书</p>

<p>所以，用起来很简单</p>

<h2 id="gitbook--1">GitBook 能做些什么</h2>

<p>写一本书，听起来有点太高级，但是往往却是如此现实  <br />
因此，你可以用 GitBook 来写一本属于你自己的书</p>

<p>至于书的内容，就由你自己来定:</p>

<ul>
  <li>可以是你幻想已久的一个世界</li>
  <li>可以是平时生活中的小常识</li>
  <li>可以是一本菜谱</li>
  <li>可以是你整理知识的小册子</li>
  <li>可以是…</li>
</ul>

<h2 id="ubuntu--gitbook-">Ubuntu 下 gitbook 的安装</h2>

<ol>
  <li>
    <p>安装 nodejs并建立软链接<sup id="fnref:nodejs"><a href="#fn:nodejs" class="footnote">2</a></sup></p>

    <pre><code> $ sudo apt-get install nodejs -y &amp;&amp; sudo ln -s `which nodejs` /usr/bin/node
</code></pre>

  </li>
  <li>
    <p>安装 NPM<sup id="fnref:npm"><a href="#fn:npm" class="footnote">3</a></sup></p>

    <pre><code> $ sudo apt-get install npm
</code></pre>

  </li>
  <li>
    <p>安装 gitbook(全局)</p>

    <pre><code> $ sudo npm install gitbook-cli -g
</code></pre>
  </li>
</ol>

<h2 id="gitbook--2">用 gitbook 来写书</h2>

<ol>
  <li>
    <p>新建一个项目，命名为 learn-gitbook, 并初始化</p>

    <pre><code> $ mkdir learn-gitbook &amp;&amp; cd learn-gitbook
 learn-gitbook $ gitbook init 
</code></pre>

    <p>learn-gitbook 下会生成两个文件 README.md 和 SUMMARY.md</p>
  </li>
  <li>
    <p>构建并运行服务器</p>

    <pre><code> $ gitbook serve ./learn-gitbook  --port 4001
 ...
 Starting server ...
 Serving book on http://localhost:4001
 ...
</code></pre>

    <p>在浏览器中访问 <code>http://localhost:4001</code>, 就可以看到一个没有内容的书</p>
  </li>
  <li>
    <p>修改书籍名称</p>

    <pre><code> learn-gitbook $ echo "#learn gitbook" &gt; README.md
</code></pre>

    <p>在浏览器中查看浏览器标签页显示内容的变化</p>
  </li>
  <li>
    <p>修改书籍介绍的内容</p>

    <pre><code> learn-gitbook $ echo "GitBook is a command line tool (and Node.js library) for building beautiful books using GitHub/Git and Markdown (or AsciiDoc)." &gt;&gt; README.md
</code></pre>

    <p>在浏览器中查看 Introduction 页面的变化</p>
  </li>
  <li>
    <p>增加几个章节(Markdown 的列表和链接语法)  <br />
在 SUMMARY.md 中增加以下内容 :</p>

    <pre><code> * [Part I](part1/README.md)
   * [Writing is nice](part1/writing.md)
   * [GitBook is nice](part1/gitbook.md)
 * [Part II](part2/README.md)
   * [We love feedback](part2/feedback_please.md)
   * [Better tools for authors](part2/better_tools.md)
</code></pre>

    <p>重建项目页面和目录 :</p>

    <pre><code>learn-gitbook  $ gitbook init		
</code></pre>

    <p>在浏览器中查看左边侧边栏的变化：发现有了几个新的章节</p>
  </li>
  <li>
    <p>为每个页面增加内容</p>

    <p>你只要在相应的页面用 Markdown 文法写作</p>
  </li>
  <li>
    <p>增加术语页面(GLOSSARY.md)</p>

    <pre><code> learn-gitbook $ touch GLOSSARY.md &amp;&amp; vim GLOSSARY.md		
 # 术语
 这个术语的定义

 # 另外一个术语
 它的定义可以包含粗体和其他所有类型的内嵌式标记...
</code></pre>

    <p>浏览器中你会发现 : 书中有 <code>术语</code>、<code>另外一个术语</code> 字样的都被高亮，而且可以点击看到它的解释</p>
  </li>
  <li>
    <p>在 book.json 中指定 gitbook 版本  <br />
列出已经安装的版本</p>

    <pre><code> learn-gitbook $ gitbook versions				
 Versions Installed:

      2.2.0
</code></pre>

    <p>新建 book.json,并指定版本 :</p>

    <pre><code> learn-gitbook $ touch book.json &amp;&amp; vim book.json
 {
     "gitbook" : "2.2.0"
 }
</code></pre>

    <p>避免运行 gitbook 时输出警告 : <code>warn: you should specify a gitbook version to use in your book.json, for example: 2.x.x</code></p>
  </li>
  <li>
    <p>指定书籍所用语言风格  <br />
修改 book.json 内容为 :</p>

    <pre><code> {
     "gitbook" : "2.2.0",
     "language" : "cn"
 }
</code></pre>

    <p>在浏览器中可以看到侧边栏的 <code>Introduction</code> 变为 <code>介绍</code></p>
  </li>
  <li>
    <p>为侧边栏顶部增加链接  <br />
   修改 book.json 内容为 :</p>

    <pre><code>{
    "gitbook" : "2.2.0",
    "language" : "cn",
    "links" : {
        "sidebar" : {
            "倘若微小" : "http://www.ifmicro.com/"
        }
    }
}
</code></pre>

    <p>在浏览器中可以看到侧边栏顶部增加一个链接，名为 <a href="http://www.ifmicro.com/">倘若微小</a></p>
  </li>
  <li>
    <p>最后，尽情写下你奇妙的想法，分享给大家吧</p>
  </li>
</ol>

<ul>
  <li>通过网站分享：把 learn-gitbook/_book 的内容放到一个云服务器上</li>
  <li>发布电子书到云盘: 生成 pdf、epub、mobi电子书，放到云盘进行分享</li>
</ul>

<h2 id="gitbook--3">gitbook 的命令小结</h2>

<h3 id="section">构建和运行</h3>

<ol>
  <li>
    <p>初始化项目目录:</p>

    <pre><code> $ gitbook init
</code></pre>

    <p>会自动生成 SUMMARY.md 中指定的页面目录和页面</p>
  </li>
  <li>
    <p>生成网站</p>

    <pre><code> $ gitbook build book_path output_path
</code></pre>
  </li>
  <li>
    <p>构建网页并运行一个小型服务器</p>

    <pre><code> $ gitbook serve --port 4001  
 ...
 Serving book on http://localhost:4001
</code></pre>

    <p>在浏览器上，访问 http://localhost:4001 , 就可以看到你的书</p>
  </li>
</ol>

<h3 id="pdfepubmobi">生成电子书(PDF、ePub和Mobi)</h3>

<p>第一步 : <a href="http://www.calibre-ebook.com/download">安装 calibre</a></p>

<p>第二步 : 执行对应命令</p>

<pre><code>	$ gitbook pdf  book_path  output_path/book_name.pdf
	$ gitbook epub book_path  output_path/book_name.epub
	$ gitbook mobi book_path  output_path/book_name.mobi
</code></pre>

<h3 id="section-1">指定一个版本</h3>

<pre><code>	$ gitbook build book_path --gitbook=2.3.0
	$ gitbook help --gitbook=2.3.0
</code></pre>

<h3 id="section-2">管理版本</h3>

<ol>
  <li>
    <p>查看 gitbook 使用</p>

    <pre><code> $ gitbook -h
</code></pre>
  </li>
  <li>
    <p>查看可以获得的所有 GitBook 版本:</p>

    <pre><code> $ gitbook versions:available  
</code></pre>
  </li>
  <li>
    <p>安装最新的 GitBook 版本</p>

    <pre><code> $ sudo gitbook versions:install latest
</code></pre>
  </li>
</ol>

<h2 id="css">自定义书本的 css</h2>

<p>一般在生成站点时，会有默认的 css (_book/gitbook/style.css)</p>

<p>你也可以自定义 css，使你的书籍更好看</p>

<ol>
  <li>
    <p>建立 css 文件</p>

    <pre><code> learn-gitbook $ mkdir -p assets/css &amp;&amp; cd assets/css &amp;&amp; touch myWebStyle.css myPdfStyle.css myMobiStyle.css myEpubStyle.css
</code></pre>

    <p>在 myStyle.css 写下你的样式</p>
  </li>
  <li>
    <p>在 book.json 中添加</p>

    <pre><code> {
     "styles" : {
         "website" : "assets/css/myWebStyle.css",
         "pdf" : "assets/css/myPdfStyle.css",
         "mobi" : "assets/css/myMobiStyle.css",
         "epub" : "assets/css/myEpubStyle.css"
     }
 }
</code></pre>

    <p>我分别为 site, pdf, mobi, epub 指定了 css, 那么分别生成它们的时候，会在默认的 css 基础上层叠指定的 css</p>
  </li>
</ol>

<h2 id="section-3">用插件来丰富你的书</h2>

<p>gitbook 文档推荐插件(主题也是插件的一种)的命名方式:</p>

<ul>
  <li>gitbook-plugin-X</li>
  <li>gitbook-theme-X</li>
</ul>

<h3 id="section-4">发现插件</h3>

<ol>
  <li>
    <p><a href="https://www.npmjs.com/search?q=gitbook-plugin">NPM-Search-gitbook-plugin</a></p>

    <pre><code> https://www.npmjs.com/search?q=gitbook-plugin
</code></pre>
  </li>
  <li>
    <p><a href="https://www.npmjs.com/search?q=gitbook-theme">NPM-Search-gitbook-theme</a></p>

    <pre><code> https://www.npmjs.com/search?q=gitbook-theme
</code></pre>
  </li>
  <li>
    <p><a href="http://plugins.gitbook.com/">gitbook 插件官方地址</a></p>

    <pre><code> http://plugins.gitbook.com/
</code></pre>
  </li>
</ol>

<h3 id="section-5">安装插件</h3>

<p>一旦你发现你需要的插件，在 book.json 添加:</p>

<pre><code>{
  "plugins": ["myPlugin", "anotherPlugin"]
}
</code></pre>

<p>对于 gitbook-plugin-X 的插件，请这样安装 :</p>

<pre><code>book-dir $ gitbook install  或者 npm install gitbook-plugin-X
</code></pre>

<p>对于 gitbook-theme-X 的插件，请这样安装 :</p>

<pre><code>book-dir $ npm install gitbook-theme-X &amp;&amp; mv node_modules/gitbook-theme-X node_modules/gitbook-plugin-X`
</code></pre>

<p><strong>PS : 具体插件请参照具体插件的文档</strong></p>

<h3 id="section-6">一些插件</h3>

<h4 id="disqus-----disqushttppluginsgitbookcomplugindisqus">disqus 评论系统 – <a href="http://plugins.gitbook.com/plugin/disqus">disqus</a></h4>

<ol>
  <li>
    <p>安装 gitbook-plugin-disqus</p>

    <pre><code> sudo npm install gitbook-plugin-disqus -g
</code></pre>
  </li>
  <li>
    <p>在 book.json 中添加 :</p>

    <pre><code> {
     "plugins": ["disqus"],
     "pluginsConfig": {
         "disqus": {
                 "shortName": "XXXXXXX"
             }
         }  
 }
</code></pre>
  </li>
</ol>

<p><code>shortName</code> 是你在 <a href="https://disqus.com/">disqus.com</a> 上创建 website 指定的 shortname</p>

<h4 id="autocoverhttppluginsgitbookcompluginautocover">自动化封面 – <a href="http://plugins.gitbook.com/plugin/autocover">autocover</a></h4>

<ol>
  <li>安装 <a href="https://github.com/Automattic/node-canvas/wiki/_pages">node-canvas</a></li>
  <li>
    <p>安装 gitbook-plugin-autocover</p>

    <pre><code> sudo npm install gitbook-plugin-autocover
</code></pre>
  </li>
  <li>
    <p>在 book.json 中添加 :</p>

    <pre><code> {
     "plugins": ["autocover"],
     "pluginsConfig": {
         "autocover": {
             "title": "My Book",
             "author": "Author",
             "font": {
                 "size": null,
                 "family": "Impact",
                 "color": "#FFF"
             },
             "size": {
                 "w": 1800,
                 "h": 2360
             },
             "background": {
                 "color": "#09F"
             }
         }
     }
 }
</code></pre>
  </li>
</ol>

<h2 id="gitbook--4">GitBook 相关链接</h2>

<ul>
  <li>
    <p>GitBook 官方文档 : <a href="https://www.gitbook.com/book/gitbookio/documentation/details">https://www.gitbook.com/book/gitbookio/documentation/details</a></p>
  </li>
  <li>
    <p>GitBook 项目目录 : <a href="https://github.com/GitbookIO/gitbook">https://github.com/GitbookIO/gitbook</a></p>
  </li>
  <li>
    <p>gitbook-cli 项目目录 : <a href="https://github.com/GitbookIO/gitbook-cli">https://github.com/GitbookIO/gitbook-cli</a></p>
  </li>
  <li>
    <p>GitBook API Documentation : <a href="http://developer.gitbook.com/">http://developer.gitbook.com/</a></p>
  </li>
  <li>
    <p>GitBook Enterprise Guide : <a href="https://www.gitbook.com/book/gitbookio/enterprise-guide/details">https://www.gitbook.com/book/gitbookio/enterprise-guide/details</a></p>
  </li>
</ul>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:gitbook-online">
      <p>还有一个与之同名的在线创建和托管书籍的平台<a href="https://www.gitbook.com/">www.gitbook.com</a> <a href="#fnref:gitbook-online" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:nodejs">
      <p>采用软链接解决ubuntu下 nodejs 命令名与 gitbook 内部使用 nodejs 命令名不一致<br />具体看<a href="http://stackoverflow.com/questions/18130164/nodejs-vs-node-on-ubuntu-12-04#answer-18130296">nodejs vs node on ubuntu 12.04</a> <a href="#fnref:nodejs" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:npm">
      <p>Node Package Manager , 一个 nodejs 包管理和分发工具 <br /><a href="https://github.com/npm/npm">NPM Github项目地址</a> <a href="#fnref:npm" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev">上一篇: <a href="/%E8%BD%AF%E4%BB%B6/2015/05/05/tmux/" title="用 tmux 保存工作现场">用 tmux 保存工作现场</a></li>
      
      
        <li class="next">下一篇: <a href="/%E8%AE%B0%E5%BD%95/2015/09/21/ssh-login-server/" title="使用 SSH 登录服务器">使用 SSH 登录服务器</a></li>
      
      </ul>
    </div>

    <hr>

    <div id="to_comments">
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'ifmicro'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>





    </div>
 </div>

        </div>
      </main>
      <footer class="site-footer">
        <div class="site-wrapper clearfix">
          <p>&copy;2014-2017 <a href="">倘若微小</a><br />
Powered by <a href="https://jekyllrb.com/">jekyll</a> | Hosted by <a href="https://github.com/">github</a> | Designed by <a href="">MwumLi</a><br />
本站采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享 署名-非商业性使用 4.0 国际 许可协议</a>进行许可。</p>

        </div>
      </footer>

      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>
    </div>
        


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-50450008-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






        



  
  <script src="/assets/lib/jquery/jquery-2.1.3.min.js?2.1.3" type="text/javascript" ></script>
  

  
  <script src="/assets/lib/jquery-zclip/jquery.zclip.js?1.1.7" type="text/javascript" ></script>
  

  
  <script src="/assets/lib/jquery.resizeend/jquery.resizeend.min.js?0.2.0" type="text/javascript" ></script>
  

  
  <script src="/assets/lib/bigfoot/bigfoot.min.js?2.1.4" type="text/javascript" ></script>
  

  
  <script src="/assets/lib/fancybox/source/jquery.fancybox.pack.js?2.1.5" type="text/javascript" ></script>
  




        <script type="text/javascript" id="jekyll.configurations" charset="utf-8">
          var IfMicro = window.IfMicro || {};
          var CONFIG = {
            domain: 'http://mwumli.github.com',
            zclip_swf: '/assets/lib/jquery-zclip/ZeroClipboard.swf',
            page: {
              type: 'post',
              title: '用 gitbook 来写书',
              toc: !!'true'
            }
          };
          window._EXPORT_RENDER_RECT = {
            width: 1366,
            height: 1555
          }
        </script>
        


  
  
    



  

  

  

  
  
  <link rel="stylesheet" href="/assets/css/bigfoot-number.css?2.1.4" type="text/css">
  
  

  
  
  <link rel="stylesheet" href="/assets/lib/fancybox/source/jquery.fancybox.css?2.1.5" type="text/css">
  
  



  <script src="/assets/js/toc.js?2.0.1" type="text/javascript" ></script>
  
  

  
  <script src="/assets/js/utils.js?2.0.1" type="text/javascript" ></script>
  

  
  
  

  
  <script src="/assets/js/bootstrap.js?2.0.1" type="text/javascript" ></script>
  


    </body>
</html>


