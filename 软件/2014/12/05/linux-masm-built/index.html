


<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
		<title>Linux下MASM汇编环境搭建 | 微尘</title>

  		
		<meta name="description" content="">
        

	    <meta name="author" content="Liluo">
	
        <!-- syntax highlighting CSS -->
		<link rel="shortcut icon" href="/assets/imgs/favicon.ico" type="image/vnd.microsoft.icon">
        <!-- Custom CSS -->
		<link rel="stylesheet" href="/assets/themes/custom_me/css/cikonss.css"}}" />
        <link rel="stylesheet" href="/assets/themes/custom_me/css/main.css" type="text/css" media="all">
        <link rel="stylesheet" href="/assets/themes/custom_me/css/pygments.css" type="text/css" media="all">
        <link rel="stylesheet" href="/assets/themes/custom_me/css/jquery.mCustomScrollbar.min.css" type="text/css" media="all">`
        <link rel="stylesheet" href="/assets/themes/custom_me/css/bigfoot-number.css" type="text/css" media="all">

    </head>
    <body>
        <div id="all">
<!--            header start-->
            <div id="header">
                <div id="title">
                <h1 >
                    <a href="/">微尘<span class="title-tagline">---人生最美妙的风景就是内心的淡定和从容</span>
					</a>                     	   
				</h1>
                </div>
                <!--hr/ -->
                <div id="top-nav">
                    <ul>
					



    
  	
  
  
  
	  
	  			

  
	  
	  
  	 		
      		
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  
	  
	  			

  

  
  		<li><a href="/pages/micro_say/2015.html">微尘</a></li>
  



					<li><a href="/pages/articles/index.html">文章</a></li>
					<li><a href="/pages/categories/index.html">分类</a></li>
					<li><a href="/pages/tags/index.html">标签</a></li>
					<li><a href="/rss.xml">rss订阅</a></li>
					</ul>   
                </div>
            </div> 
<!--            header end-->
            <!--hr /-->
            <div class="content">
                


<div class="page-header">
	<h1>Linux下MASM汇编环境搭建 <small></small></h1>
	<div id="article_header">
		
		
		<div>
			<span>分类: </span>
			<a href="/pages/categories/index.html#软件-ref" class="tag">软件</a> 
			
				<span>标签: </span>
			
			
				<a href="/pages/tags/index.html#masm-ref" class="tag">masm</a>
    		
				<a href="/pages/tags/index.html#assembly-ref" class="tag">assembly</a>
    		
				<a href="/pages/tags/index.html#汇编-ref" class="tag">汇编</a>
    		
		</div>		
		<div>
			Last Modify in
			
			<span>2014-12-05</span>,
			
			published in <span>2014-12-05</span> 
			by <span> LiLuo</span>
		</div>

		
		
	</div>
</div>

<div id="page-content">
    
<h3 id="section">碎碎念</h3>

<p><code>MASM</code>是Microsoft Macro Assembler的缩写，它是微软为x86微处理器家族缩写的一套宏编译器</p>

<p><code>dosbox</code>是一款x86/DOS环境模拟器，可以很好模拟DOS环境,方便我们运行DOS程序</p>

<p><code>.asm</code>是汇编代码的后缀</p>

<p>好了，现在开始吧！</p>

<h3 id="dosbox">安装dosbox</h3>

<pre><code>$ sudo apt-get install dosbox  
</code></pre>

<h3 id="masm">下载MASM软件包</h3>

<p>从这里下载<a href="http://yun.baidu.com/share/link?shareid=507770005&amp;uk=388194121" title="masm.tar.bz2">masm.tar.bz2</a></p>

<pre><code>$ cd ~
$ mkdir -p masm/tools
$ tar xjf Download/masm.tar.bz2 -C masm/tools 
</code></pre>

<p>下载的文件，解压到新建的文件夹masm/tools下<br />
masm即将作为dosbox的C盘</p>

<h3 id="dosbox-1">启动dosbox</h3>

<pre><code>$ dosbox -c "mount C: ~/masm/tools" -c "path %path%;C:\tools\"
</code></pre>

<p>好了，dosbox应该出现了，你可以使用<code>debug.exe</code>,<code>masm.exe</code>了<br />
<code>-c</code>: 指定dosbox的启动参数<br />
<code>mount C: ~/masm/tools</code>: 把我们用户主目录下的masm/tools作为dosbox的C盘<br />
<code>path %path%;C:\tools</code> : 给path(<em>可执行文件搜索路径</em>)环境变量添加值，这样，我们无论在哪个目录都可以使用masm软件包的工具了</p>

<h3 id="dosbox-2">使用脚本启动dosbox</h3>

<p><strong>dosbox_setup.sh</strong></p>

<pre><code>#!/bin/bash
dosbox -c "mount C: ~masm" -c "path %path%;C:\tools\" &amp;
</code></pre>

<p>为dosbox_setup.sh添加执行权限</p>

<pre><code>$ chmod a+x dosbox_setup.sh
</code></pre>

<p>好了，你可以通过运行此脚本打开dosbox,而且路径已经配置好了</p>

<h3 id="helloworld">写个汇编版的HelloWorld</h3>

<p><strong>hello.asm</strong></p>

<pre><code>assume cs:codes, ds:datas
datas segment
		str db 'hello,world',13,10,'$'
datas ends
codes segment
	start:
		mov ax, datas
		mov ds, ax
		lea dx, str
		mov ah, 9
		int 21h
		mov ah, 4ch
		int 21h
codes ends
	end start
</code></pre>

<p>可以使用vim写代码(当然如果你嫌影响你的心情的话，可以使用<code>EDIT.COM</code>)</p>

<h4 id="dosbox-3">在dosbox中编译连接</h4>

<pre><code>C:\&gt; masm hello.asm
</code></pre>

<p>编译生成hello.obj的连接文件</p>

<pre><code>C:\&gt; link hello.obj
</code></pre>

<p>连接生成hello.exe的可执行文件</p>

<pre><code>C:\&gt; hello.exe
hello,world
</code></pre>

<p>至此结束</p>

<h3 id="section-1">一些自言自语</h3>

<p><em>为什么选择MASM呢？</em><br />
事实上，各大高校的汇编语言学习都是使用MASM的语法，而Linux下的NASM的语法和其还是有些差异的<br />
(不要问我为何在Linux下使用MASM，我能告诉你这是我的偏执吗?嘿嘿…)</p>

<p><em>为什么还要学习汇编?</em>  <br />
这个各人有个人的理由吧，而我只是单纯想了解一下底层程序的运行机制</p>

<h3 id="section-2">推荐</h3>

<p>对于汇编学习，推荐王爽先生的《汇编语言》<br />
对于dosbox的其他用法，请使用Linux下的<code>man dosbox</code><br />
对于其它问题，请留言或者google</p>


    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/%E8%AE%B0%E5%BD%95/2014/11/05/dns" title="简单的DNS讲解">&larr;上一篇：简单的DNS讲解</a></li>
      
        <li class="archive"><a href="/pages/articles/index.html">所有文章</a></li>
      
        <li class="next"><a href="/%E8%AE%B0%E5%BD%95/2014/12/06/raspberrypi-install" title="Raspberry Pi安装Debian Wheezy系统">下一篇：Raspberry Pi安装Debian Wheezy系统&rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = ''; // required: replace example with your forum shortname
	    /* * * DON'T EDIT BELOW THIS LINE * * */
	    (function() {
		         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
								     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





 </div>


   
            </div>
            <hr />
            <div id="footer">
                <p>
                <span>&copy;2014 Liluo</span>
                </p>
            </div>
        </div>
		
		<!-- site top -->
		<div id="site-top"><a href="#" title="Return to Top">TOP</a></div>

		


		<script src="/assets/themes/custom_me/js/jquery-2.1.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="/assets/themes/custom_me/js/jquery.zclip.js"></script>
		<script src="/assets/themes/custom_me/js/copy.js"></script>
		<script src="http://cdn.bootcss.com/underscore.js/1.8.3/underscore.js"></script>
		<script src="/assets/themes/custom_me/js/toc.js"></script>
		<script src="/assets/themes/custom_me/js/jquery.resizeEnd.js"></script>
		<script src="/assets/themes/custom_me/js/jquery.mCustomScrollbar.concat.min.js"></script>

		<script src="/assets/themes/custom_me/js/bigfoot.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).ready(function(){
						
				addCopy("pre", "copy", "Copy");
				tocEffect();

				var bigfoot=$.bigfoot({
					preventPageScroll: true
					})

			})
		</script>	
 </div>
    </body>
</html>




